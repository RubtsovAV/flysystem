version: '2'
services:
    wait:
        image: debian:wheezy
        entrypoint: /wait-for-it.sh
        volumes:
            - ./wait-for-it.sh:/wait-for-it.sh

    test:
        build: ./test
        volumes:
            - ./../../../../:/app
        entrypoint: ./vendor/phpunit/phpunit/phpunit
        environment:
            - FTP_ADAPTER_HOST=vsftpd
            - FTP_ADAPTER_PORT=21
            - FTP_ADAPTER_USER=ftpuser
            - FTP_ADAPTER_PASSWORD=password
            - FTP_ADAPTER_SSL=false


    vsftpd:
        image: fauria/vsftpd
        volumes:
            - ./../resources:/home/vsftpd/ftpuser
        environment:
            - FTP_USER=ftpuser
            - FTP_PASS=password

    pure-ftpd:
        build: ./pure-ftpd
        volumes:
            - ./../resources:/home/ftpuser/ftpuser
        environment:
            - FTP_USER=ftpuser
            - FTP_PASS=password
            - FTP_PATH=/home/ftpuser/ftpuser
            - FTP_PUBLICHOST=pure-ftpd